<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Creating a Notes App with FARM Stack | Learning with Rick</title>
<meta name="keywords" content="">
<meta name="description" content="Introduction I&rsquo;ve been wanting to learn more about CI/CD tools and techniques. To do this I could use an existing project, but I also want to get more reps in with the development process, so I decided to start a new project. A note taking app sounded interesting and simple enough to cover what I want to learn. So, I started by setting up a basic structure using the FARM stack.">
<meta name="author" content="">
<link rel="canonical" href="https://rickt.io/posts/04-creating-a-basic-notes-app-using-the-farm-stack/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.c298361a052d70fd4ce0d87fac47d88fb063528ceab06c67a460167c3d399bdc.css" integrity="sha256-wpg2GgUtcP1M4Nh/rEfYj7BjUozqsGxnpGAWfD05m9w=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://rickt.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://rickt.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://rickt.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://rickt.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://rickt.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-YDQ7YKECFZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-YDQ7YKECFZ');
</script>
<meta property="og:title" content="Creating a Notes App with FARM Stack" />
<meta property="og:description" content="Introduction I&rsquo;ve been wanting to learn more about CI/CD tools and techniques. To do this I could use an existing project, but I also want to get more reps in with the development process, so I decided to start a new project. A note taking app sounded interesting and simple enough to cover what I want to learn. So, I started by setting up a basic structure using the FARM stack." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://rickt.io/posts/04-creating-a-basic-notes-app-using-the-farm-stack/" />
<meta property="og:image" content="https://rickt.io/images/farmstack.png" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-09-14T00:00:00+00:00" />
<meta property="article:modified_time" content="2023-09-14T00:00:00+00:00" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://rickt.io/images/farmstack.png" />
<meta name="twitter:title" content="Creating a Notes App with FARM Stack"/>
<meta name="twitter:description" content="Introduction I&rsquo;ve been wanting to learn more about CI/CD tools and techniques. To do this I could use an existing project, but I also want to get more reps in with the development process, so I decided to start a new project. A note taking app sounded interesting and simple enough to cover what I want to learn. So, I started by setting up a basic structure using the FARM stack."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://rickt.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Creating a Notes App with FARM Stack",
      "item": "https://rickt.io/posts/04-creating-a-basic-notes-app-using-the-farm-stack/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Creating a Notes App with FARM Stack",
  "name": "Creating a Notes App with FARM Stack",
  "description": "Introduction I\u0026rsquo;ve been wanting to learn more about CI/CD tools and techniques. To do this I could use an existing project, but I also want to get more reps in with the development process, so I decided to start a new project. A note taking app sounded interesting and simple enough to cover what I want to learn. So, I started by setting up a basic structure using the FARM stack.",
  "keywords": [
    
  ],
  "articleBody": "Introduction I’ve been wanting to learn more about CI/CD tools and techniques. To do this I could use an existing project, but I also want to get more reps in with the development process, so I decided to start a new project. A note taking app sounded interesting and simple enough to cover what I want to learn. So, I started by setting up a basic structure using the FARM stack.\nThe FARM stack stands for:\nFastAPI - a Python framework for easily writing a back end API.\nReact - a Javascript library used for writing interactive front end interfaces.\nMongoDB - a NoSQL document DB with low latency and high scalability.\nI chose this stack because I have a little experience with FastAPI and React and wanted to check out MongoDB, as I had only used SQLite before and wanted to see how a NoSQL document DB works.\nPrerequisites Before starting, I already had the following installed:\\\n NodeJS Git Python  pipenv: install by running pip install pipenv --user    I used Linux (Ubuntu) for my workstation, but this process works for Windows and MacOS as well.\nFastAPI First, I created a project folder along with two subfolders for the front end and back end, as these will be containerized and deployed separately at a later date.\n~/coding/projects/notes/frontend\n~/coding/projects/notes/backend\nThen, I created a backend/requirements.txt with the following:\nfastapi == 0.85.1 uvicorn == 0.18.3 motor == 3.2.0 Uvicorn is an ASGI python web server commonly used with FastAPI. Motor is an asynchronous driver for interacting with MongoDB.\nNext, I started a python virtual environment with pipenv shell and installed the dependencies with pipenv install -r requirements.txt\nThen I created a file backend/main.py with the following:\nfrom fastapi import FastAPI from fastapi.middleware.cors import CORSMiddleware app = FastAPI() origins = ['https://localhost:3000'] app.add_middleware( CORSMiddleware, allow_origins = origins, allow_credentials = True, allow_methods=[\"*\"], allow_headers=[\"*\"] ) @app.get(\"/\") def read_root(): return {\"Hello\":\"World\"} To make sure this worked, I started the Uvicorn server locally with uvicorn main:app --reload and got the “Hello: World” response at http://127.0.0.1:8000/. You can also get an automatically generated interactive list of all your API methods by appending /docs to the url. This is one of my favorite features of FastAPI.\nMongoDB You can setup a MongoDB server locally, but I wanted to get more experience working with SASS, so I signed up to use MongoDB’s Atlas free tier. I also installed MongoDB Shell and MongoDB Compass - the command line and graphical interfaces.\nIn the Atlas web interface, I then created a cluster, choosing AWS, and got the connection information by clicking the connect button in the main dashboard and following the direction for Mongo Shell. Once connected, I created a new database called “notes” by running use notes\nI wanted to add some dummy data, so, to create a collection called board01 and insert some data I ran:\ndb.board01.insertOne({title:\"hello\",description:\"there\"})  To confirm, I viewed the results in Compass: Connecting FastAPI to MongoDB To connect the FastAPI backend to the Mongo database, I created a file, database.py. Here, I used the motor python module to create functions that will be called by main.py. I also created a separate keys.env to more securly insert my Mongo Atlas credentials, then loaded those using dotenv. Here’s what that ended up looking like:\nimport os from bson import ObjectId import pydantic import motor.motor_asyncio from dotenv import load_dotenv pydantic.json.ENCODERS_BY_TYPE[ObjectId]=str load_dotenv(\"keys.env\") mongo_user = os.getenv(\"MONGO_USER\") mongo_pass = os.getenv(\"MONGO_PASS\") uri = 'mongodb+srv://' + mongo_user + ':' + mongo_pass + '@cluster0.4ybbrum.mongodb.net/?retryWrites=true\u0026w=majority' client = motor.motor_asyncio.AsyncIOMotorClient(uri) database = client.notes collection = database.board01 async def get_all_cards(): cards = [] cursor = collection.find({}) async for document in cursor: cards.append(document) return cards async def create_card(card): result = await collection.insert_one(card) return card async def update_card(id, card): document = card await collection.replace_one({\"_id\": ObjectId(id)}, document) return document async def remove_card(id): await collection.delete_one({\"_id\": ObjectId(id)}) return True The keys.env file looked something like:\nMONGO_USER=myuser MONGO_PASS=mypassphrase With that in place, I added the following functions to main.py:\n@app.get(\"/cards\") async def get_cards(): response = await database.get_all_cards() return response @app.post(\"/card\") async def add_card(title: str, description: str): card = {'title': title, 'description': description} response = await database.create_card(card) return response @app.put(\"/card\") async def update_card(id: str, title: str, description: str): card = {'title': title, 'description': description} response = await database.update_card(id, card) return response @app.delete(\"/card\") async def delete_card(id): response = await database.remove_card(id) return response I used the interface that is generated by FastAPI at http://127.0.0.1:8000/docs to confirm that each function worked. With that, the basic backend was finished and I just needed to create the frontend interface.\nReact In the /notes/frontend folder, I initialized a new React project by running:\nnpx create-react-app\nThen, I ran the local dev server using:\nnpm start\nAfter clearing out the default code from App.js, I created an initial load function, a delete function , and an add function. These all form API calls using the vanilla fetch function and modify the working data using React’s useState hook.\nimport React, {useState, useEffect} from \"react\" import './App.css'; import Card from \"./Card\" import AddCard from \"./AddCard\" function App() { const [cardData, setCardData] = useState([]) const host = 'http://10.1.1.121:8000' useEffect(() = { loadCardData() },[]) function loadCardData() { fetch(host + '/cards') .then(response = response.json()) .then(data = { data = data.map(prev = { return {...prev} }) setCardData(data) }) } function deleteCard(id) { fetch(host + '/card?id=' + id, {method: 'DELETE'}) .then(setCardData(prev = prev.filter(card = card._id !== id))) } function addCard(props) { fetch(host + '/card?title=' + props.title + '\u0026description=' + props.description, {method: 'POST'}) .then(response = response.json()) .then(data = { console.log(data) setCardData(prev = [...prev, data]) }) } const cards = cardData.map(card = { return Card key = {card._id} title = {card.title} description = {card.description} delete = {() = deleteCard(card._id)} / }) return ( main className=\"main-container\" AddCard addCard={addCard}/ div className=\"cards\"{cards}/div /main ) } export default App; In addition to the API interfacing functions, I created two React components. The first was AddCard.js, which creates an input form used for adding a new notecard.\nimport React, {useState} from \"react\" import \"./AddCard.css\" export default function AddCardForm(props) { const [formData, setFormData] = useState({ title: \"\", description: \"\" }) function handleSubmit (event) { event.preventDefault() props.addCard(formData) setFormData({ title: \"\", description: \"\" }) } function handleChange(event) { setFormData(prev = { return { ...prev, [event.target.name]: event.target.value } }) } return ( div className=\"addcard\" form onSubmit={handleSubmit} input type=\"text\" placeholder=\"Title\" onChange={handleChange} className=\"title\" name=\"title\" value={formData.title} / input type=\"text\" placeholder=\"Description\" onChange={handleChange} className=\"description\" name=\"description\" value={formData.description} / button svg className=\"submit\" viewBox=\"0 0 24 24\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" aria-labelledby=\"returnIconTitle\" fill=\"none\" color=\"#000000\" titleEnter/title path d=\"M19,8 L19,11 C19,12.1045695 18.1045695,13 17,13 L6,13\"/ polyline points=\"8 16 5 13 8 10\"//svg /button /form /div ) } The second component was for the cards themselves, Card.js:\nimport React from \"react\" import \"./Card.css\" export default function Card(props) { return ( div className=\"card\" div className=\"title\"{props.title}/div div className=\"text\"{props.description}/div div className=\"footer\" button onClick={props.delete} svg className=\"delete\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" titleDelete/title path d=\"M512 897.6c-108 0-209.6-42.4-285.6-118.4-76-76-118.4-177.6-118.4-285.6 0-108 42.4-209.6 118.4-285.6 76-76 177.6-118.4 285.6-118.4 108 0 209.6 42.4 285.6 118.4 157.6 157.6 157.6 413.6 0 571.2-76 76-177.6 118.4-285.6 118.4z m0-760c-95.2 0-184.8 36.8-252 104-67.2 67.2-104 156.8-104 252s36.8 184.8 104 252c67.2 67.2 156.8 104 252 104 95.2 0 184.8-36.8 252-104 139.2-139.2 139.2-364.8 0-504-67.2-67.2-156.8-104-252-104z\" fill=\"\" / path d=\"M707.872 329.392L348.096 689.16l-31.68-31.68 359.776-359.768z\" fill=\"\" / path d=\"M328 340.8l32-31.2 348 348-32 32z\" fill=\"\" / /svg /button /div /div ) } I’m glossing over a lot of the difficulty I had in creating the React code. If you’re looking for a good resource for learning React, I recommend checking out Scrimba’s course by Bob Ziroll. It is one of the best resources for any technology that I’ve come across.\nAfter that I spent way too long working on css to create a passable aesthetic, and I’m pretty happy how it turned out:\nConclusion I am looking forward to using this project to learn more about Docker, CI/CD, IAC, and other devops tools.\nYou can find the repo with all the code here - https://github.com/rickthackeray/notes\nCheers!\nRick\n",
  "wordCount" : "1296",
  "inLanguage": "en",
  "image":"https://rickt.io/images/farmstack.png","datePublished": "2023-09-14T00:00:00Z",
  "dateModified": "2023-09-14T00:00:00Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://rickt.io/posts/04-creating-a-basic-notes-app-using-the-farm-stack/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Learning with Rick",
    "logo": {
      "@type": "ImageObject",
      "url": "https://rickt.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://rickt.io/" accesskey="h" title="Learning with Rick (Alt + H)">Learning with Rick</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://rickt.io/about/" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="https://rickt.io/" title="Learning with Rick">
                    <span>Posts</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://rickt.io/">Home</a>&nbsp;»&nbsp;<a href="https://rickt.io/posts/">Posts</a></div>
    <h1 class="post-title">
      Creating a Notes App with FARM Stack
    </h1>
    <div class="post-meta"><span title='2023-09-14 00:00:00 +0000 UTC'>September 14, 2023</span>&nbsp;·&nbsp;7 min

</div>
  </header> 
<figure class="entry-cover"><img loading="lazy" src="https://rickt.io/images/farmstack.png" alt="">
        
</figure>
  <div class="post-content"><h2 id="introduction">Introduction<a hidden class="anchor" aria-hidden="true" href="#introduction">#</a></h2>
<p>I&rsquo;ve been wanting to learn more about CI/CD tools and techniques. To do this I could use an existing project, but I also want to get more reps in with the development process, so I decided to start a new project. A note taking app sounded interesting and simple enough to cover what I want to learn. So, I started by setting up a basic structure using the FARM stack.</p>
<p>The FARM stack stands for:<br>
<strong>Fa</strong>stAPI - a Python framework for easily writing a back end API.<br>
<strong>R</strong>eact - a Javascript library used for writing interactive front end interfaces.<br>
<strong>M</strong>ongoDB - a NoSQL document DB with low latency and high scalability.</p>
<p>I chose this stack because I have a little experience with FastAPI and React and wanted to check out MongoDB, as I had only used SQLite before and wanted to see how a NoSQL document DB works.</p>
<h2 id="prerequisites">Prerequisites<a hidden class="anchor" aria-hidden="true" href="#prerequisites">#</a></h2>
<p>Before starting, I already had the following installed:\</p>
<ul>
<li><a href="https://nodejs.org/ro/download">NodeJS</a></li>
<li><a href="https://git-scm.com/downloads">Git</a></li>
<li><a href="https://www.python.org/downloads/">Python</a>
<ul>
<li><strong>pipenv</strong>: install by running <code>pip install pipenv --user</code></li>
</ul>
</li>
</ul>
<p>I used Linux (Ubuntu) for my workstation, but this process works for Windows and MacOS as well.</p>
<h2 id="fastapi">FastAPI<a hidden class="anchor" aria-hidden="true" href="#fastapi">#</a></h2>
<p>First, I created a project folder along with two subfolders for the front end and back end, as these will be containerized and deployed separately at a later date.</p>
<p><code>~/coding/projects/notes/frontend</code><br>
<code>~/coding/projects/notes/backend</code></p>
<p>Then, I created a <code>backend/requirements.txt</code> with the following:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">fastapi <span style="color:#ff79c6">==</span> <span style="color:#bd93f9">0.85.1</span>
uvicorn <span style="color:#ff79c6">==</span> <span style="color:#bd93f9">0.18.3</span>
motor <span style="color:#ff79c6">==</span> <span style="color:#bd93f9">3.2.0</span>
</code></pre></div><p>Uvicorn is an ASGI python web server commonly used with FastAPI. Motor is an asynchronous driver for interacting with MongoDB.</p>
<p>Next, I started a python virtual environment with <code>pipenv shell</code> and installed the dependencies with <code>pipenv install -r requirements.txt</code></p>
<p>Then I created a file <code>backend/main.py</code> with the following:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#ff79c6">from</span> fastapi <span style="color:#ff79c6">import</span> FastAPI
<span style="color:#ff79c6">from</span> fastapi.middleware.cors <span style="color:#ff79c6">import</span> CORSMiddleware

app <span style="color:#ff79c6">=</span> FastAPI()


origins <span style="color:#ff79c6">=</span> [<span style="color:#f1fa8c">&#39;https://localhost:3000&#39;</span>]

app<span style="color:#ff79c6">.</span>add_middleware(
    CORSMiddleware,
    allow_origins <span style="color:#ff79c6">=</span> origins,
    allow_credentials <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">True</span>,
    allow_methods<span style="color:#ff79c6">=</span>[<span style="color:#f1fa8c">&#34;*&#34;</span>],
    allow_headers<span style="color:#ff79c6">=</span>[<span style="color:#f1fa8c">&#34;*&#34;</span>]
)

@app<span style="color:#ff79c6">.</span>get(<span style="color:#f1fa8c">&#34;/&#34;</span>)
<span style="color:#ff79c6">def</span> <span style="color:#50fa7b">read_root</span>():
    <span style="color:#ff79c6">return</span> {<span style="color:#f1fa8c">&#34;Hello&#34;</span>:<span style="color:#f1fa8c">&#34;World&#34;</span>}
</code></pre></div><p>To make sure this worked, I started the Uvicorn server locally with <code>uvicorn main:app --reload</code> and got the &ldquo;Hello: World&rdquo; response at http://127.0.0.1:8000/. You can also get an automatically generated interactive list of all your API methods by appending <code>/docs</code> to the url. This is one of my favorite features of FastAPI.</p>
<h2 id="mongodb">MongoDB<a hidden class="anchor" aria-hidden="true" href="#mongodb">#</a></h2>
<p>You can setup a MongoDB server locally, but I wanted to get more experience working with SASS, so I signed up to use <a href="https://www.mongodb.com/atlas/database">MongoDB&rsquo;s Atlas</a> free tier. I also installed <a href="https://www.mongodb.com/products/shell">MongoDB Shell</a> and <a href="https://www.mongodb.com/products/compass">MongoDB Compass</a> - the command line and graphical interfaces.</p>
<p>In the Atlas web interface, I then created a cluster, choosing AWS, and got the connection information by clicking the <strong>connect</strong> button in the main dashboard and following the direction for <strong>Mongo Shell</strong>. Once connected, I created a new database called &ldquo;notes&rdquo; by running <code>use notes</code></p>
<p>I wanted to add some dummy data, so, to create a collection called <code>board01</code> and insert some data I ran:</p>
<pre><code>db.board01.insertOne({title:&quot;hello&quot;,description:&quot;there&quot;})
</code></pre>
<p>To confirm, I viewed the results in Compass:
<img loading="lazy" src="/images/2023-09-14_01.png#center" alt="screenshot"  />
</p>
<h2 id="connecting-fastapi-to-mongodb">Connecting FastAPI to MongoDB<a hidden class="anchor" aria-hidden="true" href="#connecting-fastapi-to-mongodb">#</a></h2>
<p>To connect the FastAPI backend to the Mongo database, I created a file, <code>database.py</code>. Here, I used the <strong>motor</strong> python module to create functions that will be called by main.py. I also created a separate <code>keys.env</code> to more securly insert my Mongo Atlas credentials, then loaded those using <strong>dotenv</strong>. Here&rsquo;s what that ended up looking like:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#ff79c6">import</span> os
<span style="color:#ff79c6">from</span> bson <span style="color:#ff79c6">import</span> ObjectId

<span style="color:#ff79c6">import</span> pydantic
<span style="color:#ff79c6">import</span> motor.motor_asyncio
<span style="color:#ff79c6">from</span> dotenv <span style="color:#ff79c6">import</span> load_dotenv

pydantic<span style="color:#ff79c6">.</span>json<span style="color:#ff79c6">.</span>ENCODERS_BY_TYPE[ObjectId]<span style="color:#ff79c6">=</span><span style="color:#8be9fd;font-style:italic">str</span>


load_dotenv(<span style="color:#f1fa8c">&#34;keys.env&#34;</span>)
mongo_user <span style="color:#ff79c6">=</span> os<span style="color:#ff79c6">.</span>getenv(<span style="color:#f1fa8c">&#34;MONGO_USER&#34;</span>)
mongo_pass <span style="color:#ff79c6">=</span> os<span style="color:#ff79c6">.</span>getenv(<span style="color:#f1fa8c">&#34;MONGO_PASS&#34;</span>)

uri <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;mongodb+srv://&#39;</span> <span style="color:#ff79c6">+</span> mongo_user <span style="color:#ff79c6">+</span> <span style="color:#f1fa8c">&#39;:&#39;</span> <span style="color:#ff79c6">+</span> mongo_pass <span style="color:#ff79c6">+</span> <span style="color:#f1fa8c">&#39;@cluster0.4ybbrum.mongodb.net/?retryWrites=true&amp;w=majority&#39;</span>
client <span style="color:#ff79c6">=</span> motor<span style="color:#ff79c6">.</span>motor_asyncio<span style="color:#ff79c6">.</span>AsyncIOMotorClient(uri)
database <span style="color:#ff79c6">=</span> client<span style="color:#ff79c6">.</span>notes
collection <span style="color:#ff79c6">=</span> database<span style="color:#ff79c6">.</span>board01


<span style="color:#ff79c6">async</span> <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">get_all_cards</span>():
    cards <span style="color:#ff79c6">=</span> []
    cursor <span style="color:#ff79c6">=</span> collection<span style="color:#ff79c6">.</span>find({})
    <span style="color:#ff79c6">async</span> <span style="color:#ff79c6">for</span> document <span style="color:#ff79c6">in</span> cursor:
        cards<span style="color:#ff79c6">.</span>append(document)
    <span style="color:#ff79c6">return</span> cards

<span style="color:#ff79c6">async</span> <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">create_card</span>(card):
    result <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">await</span> collection<span style="color:#ff79c6">.</span>insert_one(card)
    <span style="color:#ff79c6">return</span> card

<span style="color:#ff79c6">async</span> <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">update_card</span>(<span style="color:#8be9fd;font-style:italic">id</span>, card):
    document <span style="color:#ff79c6">=</span> card
    <span style="color:#ff79c6">await</span> collection<span style="color:#ff79c6">.</span>replace_one({<span style="color:#f1fa8c">&#34;_id&#34;</span>: ObjectId(<span style="color:#8be9fd;font-style:italic">id</span>)}, document)
    <span style="color:#ff79c6">return</span> document

<span style="color:#ff79c6">async</span> <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">remove_card</span>(<span style="color:#8be9fd;font-style:italic">id</span>):
    <span style="color:#ff79c6">await</span> collection<span style="color:#ff79c6">.</span>delete_one({<span style="color:#f1fa8c">&#34;_id&#34;</span>: ObjectId(<span style="color:#8be9fd;font-style:italic">id</span>)})
    <span style="color:#ff79c6">return</span> <span style="color:#ff79c6">True</span>
</code></pre></div><p>The <code>keys.env</code> file looked something like:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">MONGO_USER=myuser
MONGO_PASS=mypassphrase
</code></pre></div><p>With that in place, I added the following functions to <code>main.py</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">@app<span style="color:#ff79c6">.</span>get(<span style="color:#f1fa8c">&#34;/cards&#34;</span>)
<span style="color:#ff79c6">async</span> <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">get_cards</span>():
    response <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">await</span> database<span style="color:#ff79c6">.</span>get_all_cards()
    <span style="color:#ff79c6">return</span> response

@app<span style="color:#ff79c6">.</span>post(<span style="color:#f1fa8c">&#34;/card&#34;</span>)
<span style="color:#ff79c6">async</span> <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">add_card</span>(title: <span style="color:#8be9fd;font-style:italic">str</span>, description: <span style="color:#8be9fd;font-style:italic">str</span>):
    card <span style="color:#ff79c6">=</span> {<span style="color:#f1fa8c">&#39;title&#39;</span>: title, <span style="color:#f1fa8c">&#39;description&#39;</span>: description}
    response <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">await</span> database<span style="color:#ff79c6">.</span>create_card(card)
    <span style="color:#ff79c6">return</span> response

@app<span style="color:#ff79c6">.</span>put(<span style="color:#f1fa8c">&#34;/card&#34;</span>)
<span style="color:#ff79c6">async</span> <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">update_card</span>(<span style="color:#8be9fd;font-style:italic">id</span>: <span style="color:#8be9fd;font-style:italic">str</span>, title: <span style="color:#8be9fd;font-style:italic">str</span>, description: <span style="color:#8be9fd;font-style:italic">str</span>):
    card <span style="color:#ff79c6">=</span> {<span style="color:#f1fa8c">&#39;title&#39;</span>: title, <span style="color:#f1fa8c">&#39;description&#39;</span>: description}
    response <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">await</span> database<span style="color:#ff79c6">.</span>update_card(<span style="color:#8be9fd;font-style:italic">id</span>, card)
    <span style="color:#ff79c6">return</span> response


@app<span style="color:#ff79c6">.</span>delete(<span style="color:#f1fa8c">&#34;/card&#34;</span>)
<span style="color:#ff79c6">async</span> <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">delete_card</span>(<span style="color:#8be9fd;font-style:italic">id</span>):
    response <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">await</span> database<span style="color:#ff79c6">.</span>remove_card(<span style="color:#8be9fd;font-style:italic">id</span>)
    <span style="color:#ff79c6">return</span> response
</code></pre></div><p>I used the interface that is generated by FastAPI at http://127.0.0.1:8000/docs to confirm that each function worked. With that, the basic backend was finished and I just needed to create the frontend interface.</p>
<h2 id="react">React<a hidden class="anchor" aria-hidden="true" href="#react">#</a></h2>
<p>In the <code>/notes/frontend</code> folder, I initialized a new React project by running:</p>
<p><code>npx create-react-app</code></p>
<p>Then, I ran the local dev server using:</p>
<p><code>npm start</code></p>
<p>After clearing out the default code from <code>App.js</code>, I created an initial load function, a delete function , and an add function. These all form API calls using the vanilla <strong>fetch</strong> function and modify the working data using React&rsquo;s <strong>useState</strong> hook.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Javascript" data-lang="Javascript"><span style="color:#ff79c6">import</span> React, {useState, useEffect} from <span style="color:#f1fa8c">&#34;react&#34;</span>

<span style="color:#ff79c6">import</span> <span style="color:#f1fa8c">&#39;./App.css&#39;</span>;
<span style="color:#ff79c6">import</span> Card from <span style="color:#f1fa8c">&#34;./Card&#34;</span>
<span style="color:#ff79c6">import</span> AddCard from <span style="color:#f1fa8c">&#34;./AddCard&#34;</span>

<span style="color:#8be9fd;font-style:italic">function</span> App() {
  <span style="color:#ff79c6">const</span> [cardData, setCardData] <span style="color:#ff79c6">=</span> useState([])

  <span style="color:#ff79c6">const</span> host <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;http://10.1.1.121:8000&#39;</span>

  useEffect(() =&gt; {
    loadCardData()
  },[])

  <span style="color:#8be9fd;font-style:italic">function</span> loadCardData() {
    fetch(host <span style="color:#ff79c6">+</span> <span style="color:#f1fa8c">&#39;/cards&#39;</span>)
    .then(response =&gt; response.json())
    .then(data =&gt; {
      data <span style="color:#ff79c6">=</span> data.map(prev =&gt; {
        <span style="color:#ff79c6">return</span> {...prev}
      })
      setCardData(data)
    })
  }

  <span style="color:#8be9fd;font-style:italic">function</span> deleteCard(id) {
    fetch(host <span style="color:#ff79c6">+</span> <span style="color:#f1fa8c">&#39;/card?id=&#39;</span> <span style="color:#ff79c6">+</span> id, {method<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#39;DELETE&#39;</span>})
    .then(setCardData(prev =&gt; prev.filter(card =&gt; card._id <span style="color:#ff79c6">!==</span> id)))
  }


  <span style="color:#8be9fd;font-style:italic">function</span> addCard(props) {
    fetch(host <span style="color:#ff79c6">+</span> <span style="color:#f1fa8c">&#39;/card?title=&#39;</span> <span style="color:#ff79c6">+</span> props.title <span style="color:#ff79c6">+</span> <span style="color:#f1fa8c">&#39;&amp;description=&#39;</span> <span style="color:#ff79c6">+</span> props.description, {method<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#39;POST&#39;</span>})
    .then(response =&gt; response.json())
    .then(data =&gt; {
      console.log(data)
      setCardData(prev =&gt; [...prev, data])
    })
}

  <span style="color:#ff79c6">const</span> cards <span style="color:#ff79c6">=</span> cardData.map(card =&gt; {
    <span style="color:#ff79c6">return</span> <span style="color:#ff79c6">&lt;</span>Card 
      key <span style="color:#ff79c6">=</span> {card._id}
      title <span style="color:#ff79c6">=</span> {card.title}
      description <span style="color:#ff79c6">=</span> {card.description}
      <span style="color:#ff79c6">delete</span> <span style="color:#ff79c6">=</span> {() =&gt; deleteCard(card._id)}
    <span style="color:#ff79c6">/&gt;</span>
  })


  <span style="color:#ff79c6">return</span> (
    <span style="color:#ff79c6">&lt;</span>main className<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;main-container&#34;</span><span style="color:#ff79c6">&gt;</span>
      <span style="color:#ff79c6">&lt;</span>AddCard addCard<span style="color:#ff79c6">=</span>{addCard}<span style="color:#ff79c6">/&gt;</span>
      <span style="color:#ff79c6">&lt;</span>div className<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;cards&#34;</span><span style="color:#ff79c6">&gt;</span>{cards}<span style="color:#ff79c6">&lt;</span>/div&gt;
    <span style="color:#ff79c6">&lt;</span>/main&gt;
  )

}

<span style="color:#ff79c6">export</span> <span style="color:#ff79c6">default</span> App;

</code></pre></div><p>In addition to the API interfacing functions, I created two React components. The first was <code>AddCard.js</code>, which creates an input form used for adding a new notecard.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Javascript" data-lang="Javascript"><span style="color:#ff79c6">import</span> React, {useState} from <span style="color:#f1fa8c">&#34;react&#34;</span>

<span style="color:#ff79c6">import</span> <span style="color:#f1fa8c">&#34;./AddCard.css&#34;</span>

<span style="color:#ff79c6">export</span> <span style="color:#ff79c6">default</span> <span style="color:#8be9fd;font-style:italic">function</span> AddCardForm(props) {
    <span style="color:#ff79c6">const</span> [formData, setFormData] <span style="color:#ff79c6">=</span> useState({
        title<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;&#34;</span>,
        description<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;&#34;</span>
    })

    <span style="color:#8be9fd;font-style:italic">function</span> handleSubmit (event) {
        event.preventDefault()
        props.addCard(formData)
        setFormData({
            title<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;&#34;</span>,
            description<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;&#34;</span>
        })
    }

    <span style="color:#8be9fd;font-style:italic">function</span> handleChange(event) {
        setFormData(prev =&gt; {
            <span style="color:#ff79c6">return</span> {
                ...prev,
                [event.target.name]<span style="color:#ff79c6">:</span> event.target.value
            }
        })
    }

    <span style="color:#ff79c6">return</span> (
        <span style="color:#ff79c6">&lt;</span>div className<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;addcard&#34;</span><span style="color:#ff79c6">&gt;</span>
            <span style="color:#ff79c6">&lt;</span>form onSubmit<span style="color:#ff79c6">=</span>{handleSubmit}<span style="color:#ff79c6">&gt;</span>
                <span style="color:#ff79c6">&lt;</span>input
                    type<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;text&#34;</span>
                    placeholder<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;Title&#34;</span>
                    onChange<span style="color:#ff79c6">=</span>{handleChange}
                    className<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;title&#34;</span>
                    name<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;title&#34;</span>                
                    value<span style="color:#ff79c6">=</span>{formData.title}
                <span style="color:#ff79c6">/&gt;</span>
                <span style="color:#ff79c6">&lt;</span>input
                    type<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;text&#34;</span>
                    placeholder<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;Description&#34;</span>
                    onChange<span style="color:#ff79c6">=</span>{handleChange}
                    className<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;description&#34;</span>
                    name<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;description&#34;</span>                
                    value<span style="color:#ff79c6">=</span>{formData.description}
                <span style="color:#ff79c6">/&gt;</span>
                <span style="color:#ff79c6">&lt;</span>button<span style="color:#ff79c6">&gt;</span>
                    <span style="color:#ff79c6">&lt;</span>svg className<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;submit&#34;</span> viewBox<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;0 0 24 24&#34;</span> role<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;img&#34;</span> xmlns<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;http://www.w3.org/2000/svg&#34;</span> aria<span style="color:#ff79c6">-</span>labelledby<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;returnIconTitle&#34;</span>  fill<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;none&#34;</span> color<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;#000000&#34;</span><span style="color:#ff79c6">&gt;</span>
                        <span style="color:#ff79c6">&lt;</span>title<span style="color:#ff79c6">&gt;</span>Enter<span style="color:#ff79c6">&lt;</span>/title&gt;
                        <span style="color:#ff79c6">&lt;</span>path d<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;M19,8 L19,11 C19,12.1045695 18.1045695,13 17,13 L6,13&#34;</span><span style="color:#ff79c6">/&gt;</span>
                        <span style="color:#ff79c6">&lt;</span>polyline points<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;8 16 5 13 8 10&#34;</span><span style="color:#ff79c6">/&gt;&lt;</span>/svg&gt;
                <span style="color:#ff79c6">&lt;</span>/button&gt;
            <span style="color:#ff79c6">&lt;</span>/form&gt;
        <span style="color:#ff79c6">&lt;</span>/div&gt;
    )
}
</code></pre></div><p>The second component was for the cards themselves, <code>Card.js</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Javascript" data-lang="Javascript"><span style="color:#ff79c6">import</span> React from <span style="color:#f1fa8c">&#34;react&#34;</span>

<span style="color:#ff79c6">import</span> <span style="color:#f1fa8c">&#34;./Card.css&#34;</span>

<span style="color:#ff79c6">export</span> <span style="color:#ff79c6">default</span> <span style="color:#8be9fd;font-style:italic">function</span> Card(props) {
    <span style="color:#ff79c6">return</span> (
        <span style="color:#ff79c6">&lt;</span>div className<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;card&#34;</span><span style="color:#ff79c6">&gt;</span>
            <span style="color:#ff79c6">&lt;</span>div className<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;title&#34;</span><span style="color:#ff79c6">&gt;</span>{props.title}<span style="color:#ff79c6">&lt;</span>/div&gt;
            <span style="color:#ff79c6">&lt;</span>div className<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;text&#34;</span><span style="color:#ff79c6">&gt;</span>{props.description}<span style="color:#ff79c6">&lt;</span>/div&gt;
            <span style="color:#ff79c6">&lt;</span>div className<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;footer&#34;</span><span style="color:#ff79c6">&gt;</span>
                <span style="color:#ff79c6">&lt;</span>button onClick<span style="color:#ff79c6">=</span>{props.<span style="color:#ff79c6">delete</span>}<span style="color:#ff79c6">&gt;</span>
                    <span style="color:#ff79c6">&lt;</span>svg className<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;delete&#34;</span> viewBox<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;0 0 1024 1024&#34;</span> version<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;1.1&#34;</span> xmlns<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;http://www.w3.org/2000/svg&#34;</span><span style="color:#ff79c6">&gt;</span>
                        <span style="color:#ff79c6">&lt;</span>title<span style="color:#ff79c6">&gt;</span>Delete<span style="color:#ff79c6">&lt;</span>/title&gt;
                        <span style="color:#ff79c6">&lt;</span>path d<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;M512 897.6c-108 0-209.6-42.4-285.6-118.4-76-76-118.4-177.6-118.4-285.6 0-108 42.4-209.6 118.4-285.6 76-76 177.6-118.4 285.6-118.4 108 0 209.6 42.4 285.6 118.4 157.6 157.6 157.6 413.6 0 571.2-76 76-177.6 118.4-285.6 118.4z m0-760c-95.2 0-184.8 36.8-252 104-67.2 67.2-104 156.8-104 252s36.8 184.8 104 252c67.2 67.2 156.8 104 252 104 95.2 0 184.8-36.8 252-104 139.2-139.2 139.2-364.8 0-504-67.2-67.2-156.8-104-252-104z&#34;</span> fill<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;&#34;</span> <span style="color:#ff79c6">/&gt;</span>
                        <span style="color:#ff79c6">&lt;</span>path d<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;M707.872 329.392L348.096 689.16l-31.68-31.68 359.776-359.768z&#34;</span> fill<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;&#34;</span> <span style="color:#ff79c6">/&gt;</span>
                        <span style="color:#ff79c6">&lt;</span>path d<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;M328 340.8l32-31.2 348 348-32 32z&#34;</span> fill<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;&#34;</span> <span style="color:#ff79c6">/&gt;</span>
                    <span style="color:#ff79c6">&lt;</span>/svg&gt;
                <span style="color:#ff79c6">&lt;</span>/button&gt;
            <span style="color:#ff79c6">&lt;</span>/div&gt;
        <span style="color:#ff79c6">&lt;</span>/div&gt;
    )
}
</code></pre></div><p>I&rsquo;m glossing over a lot of the difficulty I had in creating the React code. If you&rsquo;re looking for a good resource for learning React, I recommend checking out <a href="https://scrimba.com/learn/learnreact/">Scrimba&rsquo;s course by Bob Ziroll</a>. It is one of the best resources for any technology that I&rsquo;ve come across.</p>
<p>After that I spent way too long working on css to create a passable aesthetic, and I&rsquo;m pretty happy how it turned out:</p>
<p><img loading="lazy" src="/images/2023-09-14_02.png#center" alt="screenshot"  />
</p>
<h2 id="conclusion">Conclusion<a hidden class="anchor" aria-hidden="true" href="#conclusion">#</a></h2>
<p>I am looking forward to using this project to learn more about Docker, CI/CD, IAC, and other devops tools.</p>
<p>You can find the repo with all the code here - <a href="https://github.com/rickthackeray/notes">https://github.com/rickthackeray/notes</a></p>
<p>Cheers!<br>
Rick</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
<nav class="paginav">
  <a class="prev" href="https://rickt.io/posts/05-parsing-csv-data-using-python/">
    <span class="title">« Prev</span>
    <br>
    <span>Parsing CSV Data Using Python</span>
  </a>
  <a class="next" href="https://rickt.io/posts/03-updating-a-csv-using-powershell/">
    <span class="title">Next »</span>
    <br>
    <span>Updating a CSV Using Powershell</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2024 <a href="https://rickt.io/">Learning with Rick</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
